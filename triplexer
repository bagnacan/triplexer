#!/usr/bin/env python3

import argparse
import logging
import os
import sys


MODULE = os.path.basename(sys.argv[0])


# parser
parser = argparse.ArgumentParser(prog=MODULE, description="Predict and simulate putative RNA triplexes.")
parser.add_argument("-v", "--version", help="print the version and exit", action="version", version="%(prog)s 0.1")
parser.add_argument("-c", "--conf", metavar="CONF", help="set %(metavar)s as the configuration file (default: %(default)s)", default="conf.yaml", type=argparse.FileType('r'))


# logger
logger = logging.getLogger(MODULE)


# file logger
LOGFILE = str(MODULE + ".log")
logging.basicConfig(
    level = logging.DEBUG,
    format = "%(asctime)s %(name)-12s %(levelname)-8s %(message)s",
    datefmt = "%Y-%m-%d %H:%M",
    filename = LOGFILE,
    filemode = "w")


# console logger
console = logging.StreamHandler()
console.setLevel(logging.INFO)
formatter = logging.Formatter("%(message)s")
console.setFormatter(formatter)
logging.getLogger("").addHandler(console)


args = parser.parse_args()
if len(sys.argv) == 1:
    parser.print_help(file=sys.stderr)
